<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Desconecta & Cresce</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>DESCONECTA & CRESCE</h1>
      <p>Um dia por semana sem celular, mais conexão com você mesmo. Seu pet vai crescer junto com você!</p>
    </header>

    <button onclick="sortearPet()">🎲 Sortear Pet</button>

    <div class="card">
      <img id="petImagem"  alt="Pet pequeno">
      <h2 id="petNome">Nenhum pet ainda</h2>

      <div class="progress-container">
        <div class="progress-bar" id="xpBar"></div>
      </div>
      <p id="xpTexto">XP: 0%</p>

      <button onclick="ganharXP()">💪 Ganhar XP</button>
    </div>

    <div class="section">
      <h2>Atividades Offline</h2>
      <div class="box-grid">
        <a class="box" href="ler.html">Ler um livro</a>
        <a class="box" href="caminhada.html">Fazer uma caminhada</a>
        <a class="box" href="cozinhar.html">Cozinhar algo novo</a>
      </div>
    </div>

    <div class="section">
      <h2>Recompensas</h2>
      <div class="box-grid">
        <a class="box" href="primeiro.html">Primeiro dia</a>
        <a class="box" href="leitor.html">Leitor da semana</a>
        <a class="box" href="chef.html">Chef offline</a>
      </div>
    </div>
  </div>

  <script>
  const pets = [
    {
      nome: "Cobrinha",
      pequeno: "pet/cobra.jpg",
      medio: "pet/cobramedia.jpg",
      grande: "pet/cobraadulta.jpg"
    },
    {
      nome: "Dino",
      pequeno: "pet/dino.jpg",
      medio: "pet/dinomedio.jpg",
      grande: "pet/dinoadulto.jpg"
    },
    {
      nome: "Dragão",
      pequeno: "pet/dragao.jpeg.jpg",
      medio: "pet/dragaomedio.jpg",
      grande: "pet/dragaoadulto.jpg"
    },
    {
      nome: "Pinguim",
      pequeno: "pet/pinguin.jpeg.jpg",
      medio: "pet/pinguinmedia.jpg",
      grande: "pet/pinguinadulto.jpg"
    }
  ];

 let petAtual = null;
  let xp = 0;
  let fase = "pequeno"; // fases: pequeno → medio → grande

  function sortearPet() {
    const sorteado = pets[Math.floor(Math.random() * pets.length)];
    petAtual = sorteado;
    xp = 0;
    fase = "pequeno";

    const petImg = document.getElementById("petImagem");
    petImg.src = petAtual.pequeno;
    petImg.style.transform = "scale(1)";
    document.getElementById("petNome").innerText = petAtual.nome;
    atualizarXP();
  }

  function ganharXP() {
    if (!petAtual) {
      alert("Você precisa sortear um pet primeiro!");
      return;
    }

   // Calcula incremento aleatório entre 10 e 20
  let ganho = Math.floor(Math.random() * 10) + 10; // 10 a 20

  // Ajusta para não ultrapassar 100
  if (xp + ganho > 100) {
    ganho = 100 - xp; // sobe exatamente até 100
  }

  xp += ganho;

  atualizarXP();

  // Evolui SOMENTE se chegou a 100%
  if (xp === 100) {
    evoluirPet();
  }
}

  function atualizarXP() {
    document.getElementById("xpBar").style.width = xp + "%";
    document.getElementById("xpTexto").innerText = `XP: ${xp}%`;
  }

  function evoluirPet() {
    const petImg = document.getElementById("petImagem");

    if (fase === "pequeno") {
      fase = "medio";
      petImg.src = petAtual.medio;
      petImg.style.transform = "scale(1.2)";
      alert(`${petAtual.nome} cresceu e ficou MÉDIO! 🐾`);
    } else if (fase === "medio") {
      fase = "grande";
      petImg.src = petAtual.grande;
      petImg.style.transform = "scale(1.4)";
      alert(`${petAtual.nome} evoluiu e ficou ADULTO! 🎉`);
    } else if (fase === "grande") {
      alert(`${petAtual.nome} já está no nível máximo! 🌟`);
    }

    // Reseta XP para o próximo ciclo
    xp = 0;
    atualizarXP();
  }
</script>
</body>
</html>